# 分块查找算法（C语言实现）

## 简介

本项目实现了分块查找（Block Search）算法，也称为索引顺序查找。分块查找结合了顺序查找和二分查找的优点，适用于大规模数据的快速查找。

## 算法原理

分块查找的核心思想是将数据集分成多个块（子表），每个块内的元素可以无序，但块与块之间必须有序（即后一块的所有元素大于前一块的所有元素）。同时建立一个索引表，记录每个块的最大关键字和起始位置。

查找过程分为两步：
1. 通过索引表确定目标可能所在的块（二分查找或顺序查找）
2. 在该块内进行顺序查找

## 代码结构

```c
// 索引表结构
typedef struct {
    int max_key;  // 块内最大关键字
    int start;    // 块的起始位置
    int end;      // 块的结束位置
} IndexBlock;

// 分块查找函数
int blockSearch(int arr[], IndexBlock index[], int n, int m, int target);
```

## 特性

1. **灵活的数据组织**：块内元素可以无序，只需块间有序
2. **索引表优化**：通过索引表快速定位可能的块
3. **平衡效率**：相比顺序查找效率更高，相比二分查找实现更简单
4. **参数明确**：函数参数包含原数组、索引表、数组长度、块数量和目标值

## 使用方法

### 前提条件
- 待搜索的数组需按块有序（后一块的所有元素大于前一块）
- 需预先建立索引表，正确设置每块的范围和最大值

### 示例代码
```c
int main() {
    // 待查找的有序数组
    int arr[] = {10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80};
    int n = sizeof(arr) / sizeof(arr[0]);
    
    // 建立索引表（假设分为3块）
    IndexBlock index[3] = {
        {25, 0, 3},    // 第一块：最大值25，范围索引0-3
        {50, 4, 8},    // 第二块：最大值50，范围索引4-8
        {80, 9, 14}    // 第三块：最大值80，范围索引9-14
    };
    int m = 3;  // 块的数量
    
    // 测试查找
    int target = 45;
    int result = blockSearch(arr, index, n, m, target);
    
    if (result != -1) {
        printf("找到目标值 %d，索引位置为 %d\n", target, result);
    } else {
        printf("未找到目标值 %d\n", target);
    }
    
    return 0;
}
```

## 复杂度分析

| 指标        | 最优情况   | 平均情况   | 最坏情况   |
|-------------|------------|------------|------------|
| 时间复杂度  | O(1)       | O(n/m + m) | O(n/m + m) |
| 空间复杂度  | O(m)       | O(m)       | O(m)       |

其中，n是元素总数，m是块数。当m=√n时，算法效率最优。

## 注意事项

1. **块间有序性**：必须确保后一块的所有元素大于前一块
2. **索引表正确性**：索引表中的max_key、start和end必须正确设置
3. **块数量选择**：块数m影响算法效率，通常取m≈√n
4. **返回值**：找到目标时返回索引，未找到时返回-1

## 应用场景

- 中等规模数据的快速查找
- 数据需要动态插入和删除的场景（块内无序更便于维护）
- 内存有限但需要快速查找的场景

## 扩展建议

1. **自动建索引**：添加函数自动根据数据分布生成索引表
2. **索引表存储**：对于大数据集，可将索引表存入文件或数据库
3. **块内查找优化**：对于有序块，块内可使用二分查找替代顺序查找
4. **动态索引**：实现动态调整索引表的机制，适应数据的变化

## 性能对比

| 算法       | 适用数据       | 平均时间复杂度 | 空间复杂度 |
|------------|----------------|----------------|------------|
| 顺序查找   | 任意数据       | O(n)           | O(1)       |
| 二分查找   | 完全有序数据   | O(log n)       | O(1)       |
| 分块查找   | 分块有序数据   | O(√n)          | O(√n)      |