# 二叉树、树和森林

## 1. 二叉树

### 1.1 定义
二叉树是一种特殊的树形数据结构，其中每个节点最多有两个子节点，通常称为左孩子和右孩子。二叉树的特点是每个节点最多有两个子节点，并且子节点有左右之分，顺序不能颠倒。

### 1.2 特点
- **节点数量限制**：第 \(i\) 层最多有 \(2^{i-1}\) 个节点。
- **总节点数量**：深度为 \(k\) 的二叉树最多有 \(2^k - 1\) 个节点。
- **叶子节点与度为2的节点关系**：对于任何非空二叉树，如果叶子节点数为 \(n_0\)，度为2的节点数为 \(n_2\)，则 \(n_0 = n_2 + 1\)。
- **深度计算**：对于有 \(n\) 个节点的完全二叉树，其深度为 \(\lfloor \log_2 n \rfloor + 1\)。

### 1.3 常见类型
- **满二叉树**：每一层的节点数都达到最大值。即所有叶子节点都在最后一层，且除叶子节点外，每个节点都有两个子节点。
- **完全二叉树**：除最后一层外，每一层的节点数都达到最大值，且最后一层的节点从左到右连续存在。完全二叉树的特点是节点从上到下、从左到右填充，没有空缺。
- **平衡二叉树**：左右子树的高度差不超过1。平衡二叉树的目的是保持树的平衡，从而保证操作的高效性。
- **二叉搜索树（BST）**：左子树上的所有节点的值小于根节点的值，右子树上的所有节点的值大于根节点的值。二叉搜索树的特点是能够快速进行查找、插入和删除操作。

### 1.4 遍历方法
- **前序遍历**：根节点 -> 左子树 -> 右子树。前序遍历的特点是先访问根节点，然后递归遍历左子树和右子树。
- **中序遍历**：左子树 -> 根节点 -> 右子树。中序遍历的特点是先递归遍历左子树，然后访问根节点，最后递归遍历右子树。
- **后序遍历**：左子树 -> 右子树 -> 根节点。后序遍历的特点是先递归遍历左子树和右子树，最后访问根节点。
- **层次遍历**：从上到下，从左到右逐层遍历。层次遍历的特点是按照层次顺序访问节点，通常使用队列实现。

### 1.5 二叉树的性质
- **性质1**：在二叉树的第 \(i\) 层上至多有 \(2^{i-1}\) 个结点 (i>=1\)。
- **性质2**：深度为 \(k\) 的二叉树至多有 \(2^k - 1\) 个结点 (k >=1)。
- **性质3**：对于任何一棵非空二叉树，如果其叶子结点数为 \(n_0\)，度为2的结点数为 \(n_2\)，则 \(n_0 = n_2 + 1\)。
- **性质4**：具有 \(n\) 个结点的完全二叉树的深度为 ⌊log
  2
  ​
  n⌋+1。
- **性质5**：如果对一棵有 n 个结点的完全二叉树的结点按层序编号，则对任一结点 i (1≤i≤n)，有：
  - **如果i=1** 则结点 i 是二叉树的根，无双亲；如果 i>1，则其双亲是结点 ⌊i/2⌋。
  - **如果2i≤n**则结点 i 的左孩子是结点 2i；否则结点 i 无左孩子。
  - **如果2i+1≤n**则结点 i 的右孩子是结点 2i+1；否则结点 i 无右孩子

### 1.6 二叉树的应用
- **表达式树**：用于表示和计算算术表达式。
- **决策树**：用于机器学习和数据挖掘中的分类和回归任务。
- **二叉搜索树（BST）**：用于快速查找、插入和删除操作。
- **平衡二叉树（如AVL树、红黑树）**：用于实现高效的动态数据结构，如数据库索引、符号表等。
- **堆（如二叉堆）**：用于实现优先队列，常用于任务调度、Dijkstra算法等。

### 1.7 二叉树的存储结构
- **顺序存储结构**：使用数组存储二叉树的节点，适用于完全二叉树。对于非完全二叉树，可能会浪费大量空间。
- **链式存储结构**：使用指针存储二叉树的节点，每个节点包含数据域和两个指针域，分别指向左孩子和右孩子。链式存储结构灵活，适用于各种二叉树。

### 1.8 二叉树的指针域分析
在二叉树中，每个节点有两个指针域（左孩子和右孩子），这些指针域可以是空的（`NULL`）或指向其他节点。以下是对指针域的详细分析：

#### 1.8.1 指针域的总数
对于一个有 \( n \) 个节点的二叉树，每个节点都有两个指针域（一个指向左孩子，一个指向右孩子）。因此，指针域的总数为：
\[ 2n \]

#### 1.8.2 被使用的指针域
在二叉树中，每个节点（除了根节点）都有一个父节点，因此有 \( n - 1 \) 条边。每条边对应一个被使用的指针域（要么是某个节点的左孩子指针，要么是右孩子指针）。因此，被使用的指针域数量为：
\[ n - 1 \]

#### 1.8.3 空指针域
空指针域是指那些没有指向任何节点的指针域。根据上述分析，空指针域的数量为：
\[ 2n - (n - 1) = n + 1 \]

#### 1.8.4 左孩子指针域和右孩子指针域的数量
- **左孩子指针域**：左孩子指针域的数量等于树中所有节点的左孩子数量。这个数量可以是任意值，从 0 到 \( n - 1 \)。
- **右孩子指针域**：右孩子指针域的数量同样取决于树的结构。具体来说，右孩子指针域的数量等于树中所有节点的右孩子数量。这个数量也可以是任意值，从 0 到 \( n - 1 \)。
- **左孩子指针域数量 + 右孩子指针域数量**：等于被使用的指针域数量，即：
\[ {左孩子指针域数量} + {右孩子指针域数量} = n - 1 \]

### 1.9 示例分析
假设有一棵二叉树如下：

```
        A
       / \
      B   C
     / \   \
    D   E   F
```

- **节点数量** \( n = 6 \)
- **指针域总数** \( 2n = 12 \)
- **被使用的指针域** \( n - 1 = 5 \)
- **空指针域** \( 2n - (n - 1) = 12 - 5 = 7 \)

具体分析：
- **左孩子指针域**：A->B, B->D, B->E
  - 左孩子指针域数量 = 3
- **右孩子指针域**：A->C, C->F
  - 右孩子指针域数量 = 2

验证：
\[ \text{左孩子指针域数量} + \text{右孩子指针域数量} = 3 + 2 = 5 \]
这与被使用的指针域数量一致。

### 1.10 总结
对于一个有 \( n \) 个节点的二叉树：
- **指针域总数**：\( 2n \)
- **被使用的指针域**：\( n - 1 \)
- **空指针域**：\( n + 1 \)
- **左孩子指针域数量**：取决于树的结构，范围从 0 到 \( n - 1 \)
- **右孩子指针域数量**：取决于树的结构，范围从 0 到 \( n - 1 \)
- **左孩子指针域数量 + 右孩子指针域数量**：\( n - 1 \)

通过这些分析，可以清楚地理解二叉树中指针域的分布情况。

```

