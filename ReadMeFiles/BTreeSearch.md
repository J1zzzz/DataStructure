
# B树数据结构实现

## 一、项目简介
本项目实现了B树的基本操作，包括节点创建、插入、删除、遍历和搜索功能。B树是一种自平衡的树数据结构，常用于文件系统和数据库索引，能够高效地进行顺序和随机访问。

## 二、代码结构说明
### 1. 关键定义
- `MIN_DEGREE`: 定义B树的最小度数，默认为3。每个非根节点至少有`MIN_DEGREE-1`个键，最多有`2*MIN_DEGREE-1`个键。
- `BTreeNode`结构体：
  - `keys`: 存储键的数组。
  - `t`: 最小度数（节点中键的数量范围由`t`决定）。
  - `children`: 子节点指针数组。
  - `n`: 当前键的数量。
  - `leaf`: 标记是否为叶子节点。

### 2. 核心函数
| 函数名          | 功能描述                                                                 |
|-----------------|--------------------------------------------------------------------------|
| `createNode`    | 创建新的B树节点，支持指定是否为叶子节点。                                 |
| `traverse`      | 中序遍历B树，按顺序输出所有键。                                           |
| `splitChild`    | 分裂满子节点，保持B树性质。                                               |
| `insertNonFull` | 向非满节点插入键，递归处理子节点。                                         |
| `insert`        | 入口函数，处理根节点满的情况，创建新根节点。                               |
| `search`        | 在B树中搜索指定键，返回包含该键的节点或`NULL`。                            |
| `findPredecessor` | 查找指定节点的前驱键（左子树最大值）。                          |
| `findSuccessor` | 查找指定节点的后继键（右子树最小值）。                                    |
| `merge`         | 合并相邻子节点，处理删除操作中的下溢问题。                                 |
| `deleteKey`     | 删除指定键，递归处理节点合并和借键逻辑。                                   |

## 三、功能测试说明
### 1. 主函数测试流程
1. **插入测试**：依次插入`10, 20, 5, 6, 12, 30, 7, 17`，验证B树的自动平衡。
2. **遍历测试**：中序遍历输出所有键，验证插入顺序正确性。
3. **搜索测试**：
   - 搜索存在的键`6`，应返回“找到”。
   - 搜索不存在的键`15`，应返回“未找到”。
4. **删除测试**：
   - 删除键`6`，验证B树通过合并节点保持结构正确。
   - 再次遍历，确认删除后的键集合正确。

### 2. 示例输出
```
B树遍历结果:
 5 6 7 10 12 17 20 30
搜索键6: 找到
搜索键15: 未找到
删除键6
删除后的B树遍历结果:
 5 7 10 12 17 20 30
```

## 四、如何使用
### 1. 环境要求
- C语言编译器（如GCC）

### 2. 编译与运行
```bash
gcc btree.c -o btree
./btree
```

### 3. 代码扩展建议
- 修改`MIN_DEGREE`可调整B树的度数。
- 添加可视化工具（如Graphviz）展示树结构。
- 扩展键值对存储功能，支持更复杂的数据结构。

## 五、算法复杂度
| 操作   | 时间复杂度       | 说明                          |
|--------|------------------|-------------------------------|
| 插入   | O(log n)         | 取决于树的高度，分裂操作均摊高效 |
| 删除   | O(log n)         | 合并/借键操作均摊高效          |
| 搜索   | O(log n)         | 每次搜索最多访问树的高度层节点   |
| 遍历   | O(n)             | 线性时间访问所有节点            |

